import{o as e,a as c,w as C}from"./chunk-QMGIS6GS-D9iNAifV.js";import{u as m,g as T,h as v}from"./link-DDwUT-1H.js";import{T as z,B as D,L,a as R}from"./Table-BjVWHMIn.js";import{C as I}from"./types-B02bDBLB.js";import{S as O}from"./ScanDialog-B0XoUmUq.js";import{L as x}from"./List-BxScq1Th.js";import{L as f}from"./ListItem-CHMP8Vx2.js";import"./index-gtJYCa-6.js";const s={container:{width:"100%",display:"flex",flexDirection:"column",flexGrow:1,paddingTop:"20px"},sessions:{paddingTop:"20px",paddingLeft:"10px",paddingRight:"10px"},list:{padding:"0px",width:"100%"},item:{display:"flex",flexDirection:"row",alignItems:"stretch",paddingLeft:"0px",paddingBottom:"0px",paddingRight:"0px",paddingTop:"10px"},workspaceItem:{paddingTop:"20px"},sideFrame:{marginTop:"0.5rem",marginRight:"5px",width:"10px",borderColor:"black",borderStyle:"solid",borderLeftWidth:"1px",borderTopWidth:"1px"},itemContent:{display:"flex",flexDirection:"column",flexGrow:1},actionbar:{display:"flex",flexDirection:"row",justifyContent:"end",gap:"5px"},day:{textAlign:"right"}};function F({sessions:i,programs:o,workspaces:r}){const t=m();return e.jsxs("div",{style:s.container,children:[e.jsx("div",{style:{color:t.colors3.text1,fontSize:t.font.sizes.normal},children:"Recent Sessions"}),e.jsx("div",{style:{color:t.colors3.text2,fontSize:t.font.sizes.lower2},children:"Yesterday, Today, and Tomorrow"}),i.length===0?e.jsxs("div",{style:{color:t.colors3.text2,fontSize:t.font.sizes.normal,flexGrow:1,display:"flex",alignItems:"center",justifyContent:"center"},children:["No recent sessions.",e.jsx("br",{}),"Get started by creating a session."]}):e.jsx(W,{sessions:i,programs:o,workspaces:r})]})}function W({sessions:i,programs:o,workspaces:r}){const t=m(),h=T(),[u,y]=c.useState([]),[g,p]=c.useState(!1),[j,w]=c.useState({}),S=a=>{w(a),p(!0)};return c.useEffect(()=>{let a=r.map(l=>({...l,programs:o.filter(n=>n.workspaceId==l.id).map(n=>({...n,sessions:i.filter(d=>d.programId==n.id)}))}));y(a)},[i,o,r]),e.jsxs("section",{style:s.sessions,children:[e.jsx(x,{sx:s.list,children:u.map(a=>e.jsxs(f,{style:{...s.item,...s.workspaceItem},children:[e.jsx("div",{style:{...s.sideFrame,borderColor:t.colors3.divider}}),e.jsxs("div",{style:s.itemContent,children:[e.jsx("div",{style:{fontWeight:"bold",fontSize:t.font.sizes.lower2},children:a.name}),e.jsx(x,{sx:s.list,children:a.programs.map(l=>e.jsxs(f,{style:s.item,children:[e.jsx("div",{style:{...s.sideFrame,borderColor:t.colors3.divider}}),e.jsxs("div",{style:s.itemContent,children:[e.jsx("div",{style:{fontWeight:"bold",fontSize:t.font.sizes.lower2},children:l.name}),e.jsx(z,{data:l.sessions,fields:["session","day","scan"],getId:n=>n.id,sxCell:(n,d)=>{switch(d){case"scan":return{width:"30%"}}return{}},renderCell:(n,d)=>{const b=new I(n.capabilities);switch(d){case"session":return e.jsx(L,{href:h(n),style:{...s.program,color:t.colors3.text1,textDecorationColor:t.colors3.text1,textUnderlineOffset:t.font.sizes.textUnderlineOffset,fontSize:t.font.sizes.normal},children:n.name});case"day":return e.jsx("div",{style:s.day,children:G(new Date(n.happensAt))});case"scan":return e.jsx("div",{style:s.actionbar,children:b.hasCapability("scanSession")&&e.jsx(D,{onClick:()=>S(n),children:"Scan"})})}}})]})]},l.id))})]})]},a.id))}),e.jsx(O,{open:g,setOpen:p,session:j})]})}function G(i){const o=Date.now(),r=o-24*60*60*1e3/2,t=o+24*60*60*1e3/2;return i.getTime()<r?"Yesterday":i.getTime()<t?"Today":"Tomorrow"}function U(){const{data:{sessions:i=[],programs:o=[],workspaces:r=[]}={}}=v();return e.jsx(R,{currentPage:"home",children:e.jsx(F,{sessions:i,programs:o,workspaces:r})})}function Q({}){return[{title:"New React Router App"},{name:"description",content:"Welcome to React Router!"}]}const q=C(function(){return e.jsx(U,{})});export{q as default,Q as meta};

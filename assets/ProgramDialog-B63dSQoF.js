import{o as e,a as h}from"./chunk-QMGIS6GS-D9iNAifV.js";import{D as C,B as g}from"./Table-BjVWHMIn.js";import{am as W,u as w}from"./link-DDwUT-1H.js";import{S as F,M as I}from"./Select-7yAFGjKk.js";import{F as k,I as v,a as E}from"./ManageLayout-B2jeukkQ.js";function A({id:d,value:n,onChange:s,disabled:r=!1}){const{data:l=[]}=W(),i=t=>{const o=l.find(u=>u.id===t.target.value);if(!o){console.error("Workspace not found for id:",t.target.value);return}s(o)};return e.jsx(F,{id:d,fullWidth:!0,value:n==null?void 0:n.id,onChange:i,disabled:r,children:l.map(t=>e.jsx(I,{value:t.id,children:t.name},t.id))})}const p={container:{width:"100%"},field:{marginBottom:"10px"}};function b({open:d,setOpen:n,predefinedProgram:s,predefinedWorkspace:r,onSave:l}){const i=w(),[t,o]=h.useState(s?s.name:""),[u,c]=h.useState(""),[x,f]=h.useState(null),j=r?"Edit":"Add",m=a=>{n(a),c(""),o(s?s.name:""),f(null)},S=async()=>{if(t==""){c("Please enter a name");return}const a=r??x;if(a===null){c("Please select a workspace");return}try{await l({name:t,workspaceId:a.id})}catch(y){c(`Failed to ${j} program: ${JSON.stringify(y)}`);return}m(!1)};return e.jsx(C,{open:d,setOpen:m,title:`${j} Program`,renderActions:()=>e.jsxs(e.Fragment,{children:[e.jsx(g,{onClick:S,children:"Save"}),e.jsx(g,{onClick:()=>m(!1),children:"Close"})]}),children:e.jsxs("div",{style:p.container,children:[e.jsx("div",{style:p.field,children:e.jsxs(k,{variant:"standard",fullWidth:!0,children:[e.jsx(v,{htmlFor:"name",children:"Name"}),e.jsx(E,{id:"name",fullWidth:!0,autoFocus:!0,placeholder:"Enter program name",value:t,onInput:a=>o(a.target.value)})]})}),e.jsx("div",{style:p.field,children:e.jsxs(k,{variant:"standard",fullWidth:!0,children:[e.jsx(v,{htmlFor:"workspace",children:"Workspace"}),e.jsx(A,{id:"workspace",value:r??x,onChange:f,disabled:r!=null})]})}),e.jsx("div",{style:{color:i.colors3.error,fontSize:i.font.sizes.lower2},children:u})]})})}export{b as P};
